import{B as Ii,F as ki}from"./three-CpHAp9iq.js";function Li(n,t,e=2){const r=t&&t.length,i=r?t[0]*e:n.length;let o=Ur(n,0,i,e,!0);const u=[];if(!o||o.next===o.prev)return u;let f,s,l;if(r&&(o=ji(n,t,o,e)),n.length>80*e){f=1/0,s=1/0;let c=-1/0,a=-1/0;for(let h=e;h<i;h+=e){const g=n[h],d=n[h+1];g<f&&(f=g),d<s&&(s=d),g>c&&(c=g),d>a&&(a=d)}l=Math.max(c-f,a-s),l=l!==0?32767/l:0}return Yn(o,u,e,f,s,l,0),u}function Ur(n,t,e,r,i){let o;if(i===Xi(n,t,e,r)>0)for(let u=t;u<e;u+=r)o=Ge(u/r|0,n[u],n[u+1],o);else for(let u=e-r;u>=t;u-=r)o=Ge(u/r|0,n[u],n[u+1],o);return o&&Kt(o,o.next)&&(Wn(o),o=o.next),o}function In(n,t){if(!n)return n;t||(t=n);let e=n,r;do if(r=!1,!e.steiner&&(Kt(e,e.next)||q(e.prev,e,e.next)===0)){if(Wn(e),e=t=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==t);return t}function Yn(n,t,e,r,i,o,u){if(!n)return;!u&&o&&Hi(n,r,i,o);let f=n;for(;n.prev!==n.next;){const s=n.prev,l=n.next;if(o?Ti(n,r,i,o):Ri(n)){t.push(s.i,n.i,l.i),Wn(n),n=l.next,f=l.next;continue}if(n=l,n===f){u?u===1?(n=Fi(In(n),t),Yn(n,t,e,r,i,o,2)):u===2&&Ci(n,t,e,r,i,o):Yn(In(n),t,e,r,i,o,1);break}}}function Ri(n){const t=n.prev,e=n,r=n.next;if(q(t,e,r)>=0)return!1;const i=t.x,o=e.x,u=r.x,f=t.y,s=e.y,l=r.y,c=i<o?i<u?i:u:o<u?o:u,a=f<s?f<l?f:l:s<l?s:l,h=i>o?i>u?i:u:o>u?o:u,g=f>s?f>l?f:l:s>l?s:l;let d=r.next;for(;d!==t;){if(d.x>=c&&d.x<=h&&d.y>=a&&d.y<=g&&Tn(i,f,o,s,u,l,d.x,d.y)&&q(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Ti(n,t,e,r){const i=n.prev,o=n,u=n.next;if(q(i,o,u)>=0)return!1;const f=i.x,s=o.x,l=u.x,c=i.y,a=o.y,h=u.y,g=f<s?f<l?f:l:s<l?s:l,d=c<a?c<h?c:h:a<h?a:h,y=f>s?f>l?f:l:s>l?s:l,v=c>a?c>h?c:h:a>h?a:h,x=oe(g,d,t,e,r),M=oe(y,v,t,e,r);let p=n.prevZ,w=n.nextZ;for(;p&&p.z>=x&&w&&w.z<=M;){if(p.x>=g&&p.x<=y&&p.y>=d&&p.y<=v&&p!==i&&p!==u&&Tn(f,c,s,a,l,h,p.x,p.y)&&q(p.prev,p,p.next)>=0||(p=p.prevZ,w.x>=g&&w.x<=y&&w.y>=d&&w.y<=v&&w!==i&&w!==u&&Tn(f,c,s,a,l,h,w.x,w.y)&&q(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;p&&p.z>=x;){if(p.x>=g&&p.x<=y&&p.y>=d&&p.y<=v&&p!==i&&p!==u&&Tn(f,c,s,a,l,h,p.x,p.y)&&q(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;w&&w.z<=M;){if(w.x>=g&&w.x<=y&&w.y>=d&&w.y<=v&&w!==i&&w!==u&&Tn(f,c,s,a,l,h,w.x,w.y)&&q(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Fi(n,t){let e=n;do{const r=e.prev,i=e.next.next;!Kt(r,i)&&Vr(r,e,e.next,i)&&Kn(r,i)&&Kn(i,r)&&(t.push(r.i,e.i,i.i),Wn(e),Wn(e.next),e=n=i),e=e.next}while(e!==n);return In(e)}function Ci(n,t,e,r,i,o){let u=n;do{let f=u.next.next;for(;f!==u.prev;){if(u.i!==f.i&&Di(u,f)){let s=Xr(u,f);u=In(u,u.next),s=In(s,s.next),Yn(u,t,e,r,i,o,0),Yn(s,t,e,r,i,o,0);return}f=f.next}u=u.next}while(u!==n)}function ji(n,t,e,r){const i=[];for(let o=0,u=t.length;o<u;o++){const f=t[o]*r,s=o<u-1?t[o+1]*r:n.length,l=Ur(n,f,s,r,!1);l===l.next&&(l.steiner=!0),i.push(qi(l))}i.sort(zi);for(let o=0;o<i.length;o++)e=Oi(i[o],e);return e}function zi(n,t){return n.x-t.x}function Oi(n,t){const e=Zi(n,t);if(!e)return t;const r=Xr(e,n);return In(r,r.next),In(e,e.next)}function Zi(n,t){let e=t;const r=n.x,i=n.y;let o=-1/0,u;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){const a=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=r&&a>o&&(o=a,u=e.x<e.next.x?e:e.next,a===r))return u}e=e.next}while(e!==t);if(!u)return null;const f=u,s=u.x,l=u.y;let c=1/0;e=u;do{if(r>=e.x&&e.x>=s&&r!==e.x&&Tn(i<l?r:o,i,s,l,i<l?o:r,i,e.x,e.y)){const a=Math.abs(i-e.y)/(r-e.x);Kn(e,n)&&(a<c||a===c&&(e.x>u.x||e.x===u.x&&Bi(u,e)))&&(u=e,c=a)}e=e.next}while(e!==f);return u}function Bi(n,t){return q(n.prev,n,t.prev)<0&&q(t.next,n,n.next)<0}function Hi(n,t,e,r){let i=n;do i.z===0&&(i.z=oe(i.x,i.y,t,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Gi(i)}function Gi(n){let t,e=1;do{let r=n,i;n=null;let o=null;for(t=0;r;){t++;let u=r,f=0;for(let l=0;l<e&&(f++,u=u.nextZ,!!u);l++);let s=e;for(;f>0||s>0&&u;)f!==0&&(s===0||!u||r.z<=u.z)?(i=r,r=r.nextZ,f--):(i=u,u=u.nextZ,s--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;r=u}o.nextZ=null,e*=2}while(t>1);return n}function oe(n,t,e,r,i){return n=(n-e)*i|0,t=(t-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function qi(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Tn(n,t,e,r,i,o,u,f){return(i-u)*(t-f)>=(n-u)*(o-f)&&(n-u)*(r-f)>=(e-u)*(t-f)&&(e-u)*(o-f)>=(i-u)*(r-f)}function Di(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!Ui(n,t)&&(Kn(n,t)&&Kn(t,n)&&Vi(n,t)&&(q(n.prev,n,t.prev)||q(n,t.prev,t))||Kt(n,t)&&q(n.prev,n,n.next)>0&&q(t.prev,t,t.next)>0)}function q(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Kt(n,t){return n.x===t.x&&n.y===t.y}function Vr(n,t,e,r){const i=lt(q(n,t,e)),o=lt(q(n,t,r)),u=lt(q(e,r,n)),f=lt(q(e,r,t));return!!(i!==o&&u!==f||i===0&&ft(n,e,t)||o===0&&ft(n,r,t)||u===0&&ft(e,n,r)||f===0&&ft(e,t,r))}function ft(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function lt(n){return n>0?1:n<0?-1:0}function Ui(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&Vr(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Kn(n,t){return q(n.prev,n,n.next)<0?q(n,t,n.next)>=0&&q(n,n.prev,t)>=0:q(n,t,n.prev)<0||q(n,n.next,t)<0}function Vi(n,t){let e=n,r=!1;const i=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==n);return r}function Xr(n,t){const e=ue(n.i,n.x,n.y),r=ue(t.i,t.x,t.y),i=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=i,i.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function Ge(n,t,e,r){const i=ue(n,t,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wn(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ue(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Xi(n,t,e,r){let i=0;for(let o=t,u=e-r;o<e;o+=r)i+=(n[u]-n[o])*(n[o+1]+n[u+1]),u=o;return i}function Yr(n){const t=[],e=[],r=n[0][0].length;let i=0,o=0;for(const u of n){for(const f of u)for(let s=0;s<r;s++)t.push(f[s]);o&&(i+=o,e.push(i)),o=u.length}return{vertices:t,holes:e,dimensions:r}}function mt(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Yi(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Kr(n){let t,e,r;n.length!==2?(t=mt,e=(f,s)=>mt(n(f),s),r=(f,s)=>n(f)-s):(t=n===mt||n===Yi?n:Ki,e=n,r=n);function i(f,s,l=0,c=f.length){if(l<c){if(t(s,s)!==0)return c;do{const a=l+c>>>1;e(f[a],s)<0?l=a+1:c=a}while(l<c)}return l}function o(f,s,l=0,c=f.length){if(l<c){if(t(s,s)!==0)return c;do{const a=l+c>>>1;e(f[a],s)<=0?l=a+1:c=a}while(l<c)}return l}function u(f,s,l=0,c=f.length){const a=i(f,s,l,c-1);return a>l&&r(f[a-1],s)>-r(f[a],s)?a-1:a}return{left:i,center:u,right:o}}function Ki(){return 0}function Wi(n){return n===null?NaN:+n}const Qi=Kr(mt),Ji=Qi.right;Kr(Wi).center;function St(n,t){let e,r;if(t===void 0)for(const i of n)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let o of n)(o=t(o,++i,n))!=null&&(e===void 0?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class vn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],u=t+o,f=Math.abs(t)<Math.abs(o)?t-(u-o):o-(u-t);f&&(e[r++]=f),t=u}return e[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let e=this._n,r,i,o,u=0;if(e>0){for(u=t[--e];e>0&&(r=u,i=t[--e],u=r+i,o=i-(u-r),!o););e>0&&(o<0&&t[e-1]<0||o>0&&t[e-1]>0)&&(i=o*2,r=u+i,i==r-u&&(u=r))}return u}}const no=Math.sqrt(50),to=Math.sqrt(10),eo=Math.sqrt(2);function Et(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),u=o>=no?10:o>=to?5:o>=eo?2:1;let f,s,l;return i<0?(l=Math.pow(10,-i)/u,f=Math.round(n*l),s=Math.round(t*l),f/l<n&&++f,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*u,f=Math.round(n/l),s=Math.round(t/l),f*l<n&&++f,s*l>t&&--s),s<f&&.5<=e&&e<2?Et(n,t,e*2):[f,s,l]}function ro(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,o,u]=r?Et(t,n,e):Et(n,t,e);if(!(o>=i))return[];const f=o-i+1,s=new Array(f);if(r)if(u<0)for(let l=0;l<f;++l)s[l]=(o-l)/-u;else for(let l=0;l<f;++l)s[l]=(o-l)*u;else if(u<0)for(let l=0;l<f;++l)s[l]=(i+l)/-u;else for(let l=0;l<f;++l)s[l]=(i+l)*u;return s}function fe(n,t,e){return t=+t,n=+n,e=+e,Et(n,t,e)[2]}function io(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?fe(t,n,e):fe(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function Qf(n,t){let e;for(const r of n)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);return e}function oo(n,t){let e=0,r=0;if(t===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++e,r+=i);else{let i=-1;for(let o of n)(o=t(o,++i,n))!=null&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}function*uo(n){for(const t of n)yield*t}function Qn(n){return Array.from(uo(n))}function Fn(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,o=new Array(i);++r<i;)o[r]=n+r*e;return o}function Jf(n,t){let e=0;for(let r of n)(r=+r)&&(e+=r);return e}var O=1e-6,Pt=1e-12,Z=Math.PI,sn=Z/2,$t=Z/4,ln=Z*2,U=180/Z,C=Z/180,H=Math.abs,Wr=Math.atan,an=Math.atan2,z=Math.cos,st=Math.ceil,le=Math.hypot,F=Math.sin,fo=Math.sign||function(n){return n>0?1:n<0?-1:0},mn=Math.sqrt;function lo(n){return n>1?0:n<-1?Z:Math.acos(n)}function wn(n){return n>1?sn:n<-1?-sn:Math.asin(n)}function qe(n){return(n=F(n/2))*n}function K(){}function At(n,t){n&&Ue.hasOwnProperty(n.type)&&Ue[n.type](n,t)}var De={Feature:function(n,t){At(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)At(e[r].geometry,t)}},Ue={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){se(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)se(e[r],t,0)},Polygon:function(n,t){Ve(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ve(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)At(e[r],t)}};function se(n,t,e){var r=-1,i=n.length-e,o;for(t.lineStart();++r<i;)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Ve(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)se(n[e],t,1);t.polygonEnd()}function Wt(n,t){n&&De.hasOwnProperty(n.type)?De[n.type](n,t):At(n,t)}var Nt=new vn,Xe=new vn,Qr,Jr,ae,ce,he,_n={point:K,lineStart:K,lineEnd:K,polygonStart:function(){Nt=new vn,_n.lineStart=so,_n.lineEnd=ao},polygonEnd:function(){var n=+Nt;Xe.add(n<0?ln+n:n),this.lineStart=this.lineEnd=this.point=K},sphere:function(){Xe.add(ln)}};function so(){_n.point=co}function ao(){ni(Qr,Jr)}function co(n,t){_n.point=ni,Qr=n,Jr=t,n*=C,t*=C,ae=n,ce=z(t=t/2+$t),he=F(t)}function ni(n,t){n*=C,t*=C,t=t/2+$t;var e=n-ae,r=e>=0?1:-1,i=r*e,o=z(t),u=F(t),f=he*u,s=ce*o+f*z(i),l=f*r*F(i);Nt.add(an(l,s)),ae=n,ce=o,he=u}function It(n){return[an(n[1],n[0]),wn(n[2])]}function kn(n){var t=n[0],e=n[1],r=z(e);return[r*z(t),r*F(t),F(e)]}function at(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Zn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Qt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ct(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function kt(n){var t=mn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var G,tn,D,fn,Pn,ti,ei,zn,Xn,En,Mn,yn={point:ge,lineStart:Ye,lineEnd:Ke,polygonStart:function(){yn.point=ii,yn.lineStart=ho,yn.lineEnd=go,Xn=new vn,_n.polygonStart()},polygonEnd:function(){_n.polygonEnd(),yn.point=ge,yn.lineStart=Ye,yn.lineEnd=Ke,Nt<0?(G=-(D=180),tn=-(fn=90)):Xn>O?fn=90:Xn<-O&&(tn=-90),Mn[0]=G,Mn[1]=D},sphere:function(){G=-(D=180),tn=-(fn=90)}};function ge(n,t){En.push(Mn=[G=n,D=n]),t<tn&&(tn=t),t>fn&&(fn=t)}function ri(n,t){var e=kn([n*C,t*C]);if(zn){var r=Zn(zn,e),i=[r[1],-r[0],0],o=Zn(i,r);kt(o),o=It(o);var u=n-Pn,f=u>0?1:-1,s=o[0]*U*f,l,c=H(u)>180;c^(f*Pn<s&&s<f*n)?(l=o[1]*U,l>fn&&(fn=l)):(s=(s+360)%360-180,c^(f*Pn<s&&s<f*n)?(l=-o[1]*U,l<tn&&(tn=l)):(t<tn&&(tn=t),t>fn&&(fn=t))),c?n<Pn?on(G,n)>on(G,D)&&(D=n):on(n,D)>on(G,D)&&(G=n):D>=G?(n<G&&(G=n),n>D&&(D=n)):n>Pn?on(G,n)>on(G,D)&&(D=n):on(n,D)>on(G,D)&&(G=n)}else En.push(Mn=[G=n,D=n]);t<tn&&(tn=t),t>fn&&(fn=t),zn=e,Pn=n}function Ye(){yn.point=ri}function Ke(){Mn[0]=G,Mn[1]=D,yn.point=ge,zn=null}function ii(n,t){if(zn){var e=n-Pn;Xn.add(H(e)>180?e+(e>0?360:-360):e)}else ti=n,ei=t;_n.point(n,t),ri(n,t)}function ho(){_n.lineStart()}function go(){ii(ti,ei),_n.lineEnd(),H(Xn)>O&&(G=-(D=180)),Mn[0]=G,Mn[1]=D,zn=null}function on(n,t){return(t-=n)<0?t+360:t}function po(n,t){return n[0]-t[0]}function We(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}function oi(n){var t,e,r,i,o,u,f;if(fn=D=-(G=tn=1/0),En=[],Wt(n,yn),e=En.length){for(En.sort(po),t=1,r=En[0],o=[r];t<e;++t)i=En[t],We(r,i[0])||We(r,i[1])?(on(r[0],i[1])>on(r[0],r[1])&&(r[1]=i[1]),on(i[0],r[1])>on(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,e=o.length-1,t=0,r=o[e];t<=e;r=i,++t)i=o[t],(f=on(r[1],i[0]))>u&&(u=f,G=i[0],D=r[1])}return En=Mn=null,G===1/0||tn===1/0?[[NaN,NaN],[NaN,NaN]]:[[G,tn],[D,fn]]}var Un,Lt,Rt,Tt,Ft,Ct,jt,zt,de,pe,ye,ui,fi,Q,J,nn,hn={sphere:K,point:ke,lineStart:Qe,lineEnd:Je,polygonStart:function(){hn.lineStart=xo,hn.lineEnd=mo},polygonEnd:function(){hn.lineStart=Qe,hn.lineEnd=Je}};function ke(n,t){n*=C,t*=C;var e=z(t);it(e*z(n),e*F(n),F(t))}function it(n,t,e){++Un,Rt+=(n-Rt)/Un,Tt+=(t-Tt)/Un,Ft+=(e-Ft)/Un}function Qe(){hn.point=yo}function yo(n,t){n*=C,t*=C;var e=z(t);Q=e*z(n),J=e*F(n),nn=F(t),hn.point=vo,it(Q,J,nn)}function vo(n,t){n*=C,t*=C;var e=z(t),r=e*z(n),i=e*F(n),o=F(t),u=an(mn((u=J*o-nn*i)*u+(u=nn*r-Q*o)*u+(u=Q*i-J*r)*u),Q*r+J*i+nn*o);Lt+=u,Ct+=u*(Q+(Q=r)),jt+=u*(J+(J=i)),zt+=u*(nn+(nn=o)),it(Q,J,nn)}function Je(){hn.point=ke}function xo(){hn.point=wo}function mo(){li(ui,fi),hn.point=ke}function wo(n,t){ui=n,fi=t,n*=C,t*=C,hn.point=li;var e=z(t);Q=e*z(n),J=e*F(n),nn=F(t),it(Q,J,nn)}function li(n,t){n*=C,t*=C;var e=z(t),r=e*z(n),i=e*F(n),o=F(t),u=J*o-nn*i,f=nn*r-Q*o,s=Q*i-J*r,l=le(u,f,s),c=wn(l),a=l&&-c/l;de.add(a*u),pe.add(a*f),ye.add(a*s),Lt+=c,Ct+=c*(Q+(Q=r)),jt+=c*(J+(J=i)),zt+=c*(nn+(nn=o)),it(Q,J,nn)}function nr(n){Un=Lt=Rt=Tt=Ft=Ct=jt=zt=0,de=new vn,pe=new vn,ye=new vn,Wt(n,hn);var t=+de,e=+pe,r=+ye,i=le(t,e,r);return i<Pt&&(t=Ct,e=jt,r=zt,Lt<O&&(t=Rt,e=Tt,r=Ft),i=le(t,e,r),i<Pt)?[NaN,NaN]:[an(e,t)*U,wn(r/i)*U]}function ve(n,t){function e(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(e.invert=function(r,i){return r=t.invert(r,i),r&&n.invert(r[0],r[1])}),e}function xe(n,t){return H(n)>Z&&(n-=Math.round(n/ln)*ln),[n,t]}xe.invert=xe;function si(n,t,e){return(n%=ln)?t||e?ve(er(n),rr(t,e)):er(n):t||e?rr(t,e):xe}function tr(n){return function(t,e){return t+=n,H(t)>Z&&(t-=Math.round(t/ln)*ln),[t,e]}}function er(n){var t=tr(n);return t.invert=tr(-n),t}function rr(n,t){var e=z(n),r=F(n),i=z(t),o=F(t);function u(f,s){var l=z(s),c=z(f)*l,a=F(f)*l,h=F(s),g=h*e+c*r;return[an(a*i-g*o,c*e-h*r),wn(g*i+a*o)]}return u.invert=function(f,s){var l=z(s),c=z(f)*l,a=F(f)*l,h=F(s),g=h*i-a*o;return[an(a*i+h*o,c*e+g*r),wn(g*e-c*r)]},u}function _o(n){n=si(n[0]*C,n[1]*C,n.length>2?n[2]*C:0);function t(e){return e=n(e[0]*C,e[1]*C),e[0]*=U,e[1]*=U,e}return t.invert=function(e){return e=n.invert(e[0]*C,e[1]*C),e[0]*=U,e[1]*=U,e},t}function Mo(n,t,e,r,i,o){if(e){var u=z(t),f=F(t),s=r*e;i==null?(i=t+r*ln,o=t-s/2):(i=ir(u,i),o=ir(u,o),(r>0?i<o:i>o)&&(i+=r*ln));for(var l,c=i;r>0?c>o:c<o;c-=s)l=It([u,-f*z(c),-f*F(c)]),n.point(l[0],l[1])}}function ir(n,t){t=kn(t),t[0]-=n,kt(t);var e=lo(-t[1]);return((-t[2]<0?-e:e)+ln-O)%ln}function ai(){var n=[],t;return{point:function(e,r,i){t.push([e,r,i])},lineStart:function(){n.push(t=[])},lineEnd:K,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function wt(n,t){return H(n[0]-t[0])<O&&H(n[1]-t[1])<O}function ht(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ci(n,t,e,r,i){var o=[],u=[],f,s;if(n.forEach(function(d){if(!((y=d.length-1)<=0)){var y,v=d[0],x=d[y],M;if(wt(v,x)){if(!v[2]&&!x[2]){for(i.lineStart(),f=0;f<y;++f)i.point((v=d[f])[0],v[1]);i.lineEnd();return}x[0]+=2*O}o.push(M=new ht(v,d,null,!0)),u.push(M.o=new ht(v,null,M,!1)),o.push(M=new ht(x,d,null,!1)),u.push(M.o=new ht(x,null,M,!0))}}),!!o.length){for(u.sort(t),or(o),or(u),f=0,s=u.length;f<s;++f)u[f].e=e=!e;for(var l=o[0],c,a;;){for(var h=l,g=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(f=0,s=c.length;f<s;++f)i.point((a=c[f])[0],a[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(c=h.p.z,f=c.length-1;f>=0;--f)i.point((a=c[f])[0],a[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,g=!g}while(!h.v);i.lineEnd()}}}function or(n){if(t=n.length){for(var t,e=0,r=n[0],i;++e<t;)r.n=i=n[e],i.p=r,r=i;r.n=i=n[0],i.p=r}}function Jt(n){return H(n[0])<=Z?n[0]:fo(n[0])*((H(n[0])+Z)%ln-Z)}function hi(n,t){var e=Jt(t),r=t[1],i=F(r),o=[F(e),-z(e),0],u=0,f=0,s=new vn;i===1?r=sn+O:i===-1&&(r=-sn-O);for(var l=0,c=n.length;l<c;++l)if(h=(a=n[l]).length)for(var a,h,g=a[h-1],d=Jt(g),y=g[1]/2+$t,v=F(y),x=z(y),M=0;M<h;++M,d=w,v=P,x=I,g=p){var p=a[M],w=Jt(p),S=p[1]/2+$t,P=F(S),I=z(S),A=w-d,b=A>=0?1:-1,$=b*A,m=$>Z,N=v*P;if(s.add(an(N*b*F($),x*I+N*z($))),u+=m?A+b*ln:A,m^d>=e^w>=e){var k=Zn(kn(g),kn(p));kt(k);var R=Zn(o,k);kt(R);var _=(m^A>=0?-1:1)*wn(R[2]);(r>_||r===_&&(k[0]||k[1]))&&(f+=m^A>=0?1:-1)}}return(u<-O||u<O&&s<-Pt)^f&1}function gi(n,t,e,r){return function(i){var o=t(i),u=ai(),f=t(u),s=!1,l,c,a,h={point:g,lineStart:y,lineEnd:v,polygonStart:function(){h.point=x,h.lineStart=M,h.lineEnd=p,c=[],l=[]},polygonEnd:function(){h.point=g,h.lineStart=y,h.lineEnd=v,c=Qn(c);var w=hi(l,r);c.length?(s||(i.polygonStart(),s=!0),ci(c,So,w,e,i)):w&&(s||(i.polygonStart(),s=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(w,S){n(w,S)&&i.point(w,S)}function d(w,S){o.point(w,S)}function y(){h.point=d,o.lineStart()}function v(){h.point=g,o.lineEnd()}function x(w,S){a.push([w,S]),f.point(w,S)}function M(){f.lineStart(),a=[]}function p(){x(a[0][0],a[0][1]),f.lineEnd();var w=f.clean(),S=u.result(),P,I=S.length,A,b,$;if(a.pop(),l.push(a),a=null,!!I){if(w&1){if(b=S[0],(A=b.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),P=0;P<A;++P)i.point(($=b[P])[0],$[1]);i.lineEnd()}return}I>1&&w&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(bo))}}return h}}function bo(n){return n.length>1}function So(n,t){return((n=n.x)[0]<0?n[1]-sn-O:sn-n[1])-((t=t.x)[0]<0?t[1]-sn-O:sn-t[1])}const ur=gi(function(){return!0},Eo,$o,[-Z,-sn]);function Eo(n){var t=NaN,e=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,u){var f=o>0?Z:-Z,s=H(o-t);H(s-Z)<O?(n.point(t,e=(e+u)/2>0?sn:-sn),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(o,e),i=0):r!==f&&s>=Z&&(H(t-r)<O&&(t-=r*O),H(o-f)<O&&(o-=f*O),e=Po(t,e,o,u),n.point(r,e),n.lineEnd(),n.lineStart(),n.point(f,e),i=0),n.point(t=o,e=u),r=f},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-i}}}function Po(n,t,e,r){var i,o,u=F(n-e);return H(u)>O?Wr((F(t)*(o=z(r))*F(e)-F(r)*(i=z(t))*F(n))/(i*o*u)):(t+r)/2}function $o(n,t,e,r){var i;if(n==null)i=e*sn,r.point(-Z,i),r.point(0,i),r.point(Z,i),r.point(Z,0),r.point(Z,-i),r.point(0,-i),r.point(-Z,-i),r.point(-Z,0),r.point(-Z,i);else if(H(n[0]-t[0])>O){var o=n[0]<t[0]?Z:-Z;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Ao(n){var t=z(n),e=2*C,r=t>0,i=H(t)>O;function o(c,a,h,g){Mo(g,n,e,h,c,a)}function u(c,a){return z(c)*z(a)>t}function f(c){var a,h,g,d,y;return{lineStart:function(){d=g=!1,y=1},point:function(v,x){var M=[v,x],p,w=u(v,x),S=r?w?0:l(v,x):w?l(v+(v<0?Z:-Z),x):0;if(!a&&(d=g=w)&&c.lineStart(),w!==g&&(p=s(a,M),(!p||wt(a,p)||wt(M,p))&&(M[2]=1)),w!==g)y=0,w?(c.lineStart(),p=s(M,a),c.point(p[0],p[1])):(p=s(a,M),c.point(p[0],p[1],2),c.lineEnd()),a=p;else if(i&&a&&r^w){var P;!(S&h)&&(P=s(M,a,!0))&&(y=0,r?(c.lineStart(),c.point(P[0][0],P[0][1]),c.point(P[1][0],P[1][1]),c.lineEnd()):(c.point(P[1][0],P[1][1]),c.lineEnd(),c.lineStart(),c.point(P[0][0],P[0][1],3)))}w&&(!a||!wt(a,M))&&c.point(M[0],M[1]),a=M,g=w,h=S},lineEnd:function(){g&&c.lineEnd(),a=null},clean:function(){return y|(d&&g)<<1}}}function s(c,a,h){var g=kn(c),d=kn(a),y=[1,0,0],v=Zn(g,d),x=at(v,v),M=v[0],p=x-M*M;if(!p)return!h&&c;var w=t*x/p,S=-t*M/p,P=Zn(y,v),I=ct(y,w),A=ct(v,S);Qt(I,A);var b=P,$=at(I,b),m=at(b,b),N=$*$-m*(at(I,I)-1);if(!(N<0)){var k=mn(N),R=ct(b,(-$-k)/m);if(Qt(R,I),R=It(R),!h)return R;var _=c[0],E=a[0],L=c[1],j=a[1],T;E<_&&(T=_,_=E,E=T);var B=E-_,V=H(B-Z)<O,rn=V||B<O;if(!V&&j<L&&(T=L,L=j,j=T),rn?V?L+j>0^R[1]<(H(R[0]-_)<O?L:j):L<=R[1]&&R[1]<=j:B>Z^(_<=R[0]&&R[0]<=E)){var X=ct(b,(-$+k)/m);return Qt(X,I),[R,It(X)]}}}function l(c,a){var h=r?n:Z-n,g=0;return c<-h?g|=1:c>h&&(g|=2),a<-h?g|=4:a>h&&(g|=8),g}return gi(u,f,o,r?[0,-n]:[-Z,n-Z])}function No(n,t,e,r,i,o){var u=n[0],f=n[1],s=t[0],l=t[1],c=0,a=1,h=s-u,g=l-f,d;if(d=e-u,!(!h&&d>0)){if(d/=h,h<0){if(d<c)return;d<a&&(a=d)}else if(h>0){if(d>a)return;d>c&&(c=d)}if(d=i-u,!(!h&&d<0)){if(d/=h,h<0){if(d>a)return;d>c&&(c=d)}else if(h>0){if(d<c)return;d<a&&(a=d)}if(d=r-f,!(!g&&d>0)){if(d/=g,g<0){if(d<c)return;d<a&&(a=d)}else if(g>0){if(d>a)return;d>c&&(c=d)}if(d=o-f,!(!g&&d<0)){if(d/=g,g<0){if(d>a)return;d>c&&(c=d)}else if(g>0){if(d<c)return;d<a&&(a=d)}return c>0&&(n[0]=u+c*h,n[1]=f+c*g),a<1&&(t[0]=u+a*h,t[1]=f+a*g),!0}}}}}var Vn=1e9,gt=-Vn;function Io(n,t,e,r){function i(l,c){return n<=l&&l<=e&&t<=c&&c<=r}function o(l,c,a,h){var g=0,d=0;if(l==null||(g=u(l,a))!==(d=u(c,a))||s(l,c)<0^a>0)do h.point(g===0||g===3?n:e,g>1?r:t);while((g=(g+a+4)%4)!==d);else h.point(c[0],c[1])}function u(l,c){return H(l[0]-n)<O?c>0?0:3:H(l[0]-e)<O?c>0?2:1:H(l[1]-t)<O?c>0?1:0:c>0?3:2}function f(l,c){return s(l.x,c.x)}function s(l,c){var a=u(l,1),h=u(c,1);return a!==h?a-h:a===0?c[1]-l[1]:a===1?l[0]-c[0]:a===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,a=ai(),h,g,d,y,v,x,M,p,w,S,P,I={point:A,lineStart:N,lineEnd:k,polygonStart:$,polygonEnd:m};function A(_,E){i(_,E)&&c.point(_,E)}function b(){for(var _=0,E=0,L=g.length;E<L;++E)for(var j=g[E],T=1,B=j.length,V=j[0],rn,X,bn=V[0],Sn=V[1];T<B;++T)rn=bn,X=Sn,V=j[T],bn=V[0],Sn=V[1],X<=r?Sn>r&&(bn-rn)*(r-X)>(Sn-X)*(n-rn)&&++_:Sn<=r&&(bn-rn)*(r-X)<(Sn-X)*(n-rn)&&--_;return _}function $(){c=a,h=[],g=[],P=!0}function m(){var _=b(),E=P&&_,L=(h=Qn(h)).length;(E||L)&&(l.polygonStart(),E&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),L&&ci(h,f,_,o,l),l.polygonEnd()),c=l,h=g=d=null}function N(){I.point=R,g&&g.push(d=[]),S=!0,w=!1,M=p=NaN}function k(){h&&(R(y,v),x&&w&&a.rejoin(),h.push(a.result())),I.point=A,w&&c.lineEnd()}function R(_,E){var L=i(_,E);if(g&&d.push([_,E]),S)y=_,v=E,x=L,S=!1,L&&(c.lineStart(),c.point(_,E));else if(L&&w)c.point(_,E);else{var j=[M=Math.max(gt,Math.min(Vn,M)),p=Math.max(gt,Math.min(Vn,p))],T=[_=Math.max(gt,Math.min(Vn,_)),E=Math.max(gt,Math.min(Vn,E))];No(j,T,n,t,e,r)?(w||(c.lineStart(),c.point(j[0],j[1])),c.point(T[0],T[1]),L||c.lineEnd(),P=!1):L&&(c.lineStart(),c.point(_,E),P=!1)}M=_,p=E,w=L}return I}}var me,we,_t,Mt,Bn={sphere:K,point:K,lineStart:ko,lineEnd:K,polygonStart:K,polygonEnd:K};function ko(){Bn.point=Ro,Bn.lineEnd=Lo}function Lo(){Bn.point=Bn.lineEnd=K}function Ro(n,t){n*=C,t*=C,we=n,_t=F(t),Mt=z(t),Bn.point=To}function To(n,t){n*=C,t*=C;var e=F(t),r=z(t),i=H(n-we),o=z(i),u=F(i),f=r*u,s=Mt*e-_t*r*o,l=_t*e+Mt*r*o;me.add(an(mn(f*f+s*s),l)),we=n,_t=e,Mt=r}function Fo(n){return me=new vn,Wt(n,Bn),+me}var _e=[null,null],Co={type:"LineString",coordinates:_e};function Hn(n,t){return _e[0]=n,_e[1]=t,Fo(Co)}var fr={Feature:function(n,t){return Ot(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)if(Ot(e[r].geometry,t))return!0;return!1}},lr={Sphere:function(){return!0},Point:function(n,t){return sr(n.coordinates,t)},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)if(sr(e[r],t))return!0;return!1},LineString:function(n,t){return ar(n.coordinates,t)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)if(ar(e[r],t))return!0;return!1},Polygon:function(n,t){return cr(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)if(cr(e[r],t))return!0;return!1},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)if(Ot(e[r],t))return!0;return!1}};function Ot(n,t){return n&&lr.hasOwnProperty(n.type)?lr[n.type](n,t):!1}function sr(n,t){return Hn(n,t)===0}function ar(n,t){for(var e,r,i,o=0,u=n.length;o<u;o++){if(r=Hn(n[o],t),r===0||o>0&&(i=Hn(n[o],n[o-1]),i>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<Pt*i))return!0;e=r}return!1}function cr(n,t){return!!hi(n.map(jo),di(t))}function jo(n){return n=n.map(di),n.pop(),n}function di(n){return[n[0]*C,n[1]*C]}function zo(n,t){return(n&&fr.hasOwnProperty(n.type)?fr[n.type]:Ot)(n,t)}function hr(n,t,e){var r=Fn(n,t-O,e).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function gr(n,t,e){var r=Fn(n,t-O,e).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Oo(){var n,t,e,r,i,o,u,f,s=10,l=s,c=90,a=360,h,g,d,y,v=2.5;function x(){return{type:"MultiLineString",coordinates:M()}}function M(){return Fn(st(r/c)*c,e,c).map(d).concat(Fn(st(f/a)*a,u,a).map(y)).concat(Fn(st(t/s)*s,n,s).filter(function(p){return H(p%c)>O}).map(h)).concat(Fn(st(o/l)*l,i,l).filter(function(p){return H(p%a)>O}).map(g))}return x.lines=function(){return M().map(function(p){return{type:"LineString",coordinates:p}})},x.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(y(u).slice(1),d(e).reverse().slice(1),y(f).reverse().slice(1))]}},x.extent=function(p){return arguments.length?x.extentMajor(p).extentMinor(p):x.extentMinor()},x.extentMajor=function(p){return arguments.length?(r=+p[0][0],e=+p[1][0],f=+p[0][1],u=+p[1][1],r>e&&(p=r,r=e,e=p),f>u&&(p=f,f=u,u=p),x.precision(v)):[[r,f],[e,u]]},x.extentMinor=function(p){return arguments.length?(t=+p[0][0],n=+p[1][0],o=+p[0][1],i=+p[1][1],t>n&&(p=t,t=n,n=p),o>i&&(p=o,o=i,i=p),x.precision(v)):[[t,o],[n,i]]},x.step=function(p){return arguments.length?x.stepMajor(p).stepMinor(p):x.stepMinor()},x.stepMajor=function(p){return arguments.length?(c=+p[0],a=+p[1],x):[c,a]},x.stepMinor=function(p){return arguments.length?(s=+p[0],l=+p[1],x):[s,l]},x.precision=function(p){return arguments.length?(v=+p,h=hr(o,i,90),g=gr(t,n,v),d=hr(f,u,90),y=gr(r,e,v),x):v},x.extentMajor([[-180,-90+O],[180,90-O]]).extentMinor([[-180,-80-O],[180,80+O]])}function nl(){return Oo()()}function Zo(n,t){var e=n[0]*C,r=n[1]*C,i=t[0]*C,o=t[1]*C,u=z(r),f=F(r),s=z(o),l=F(o),c=u*z(e),a=u*F(e),h=s*z(i),g=s*F(i),d=2*wn(mn(qe(o-r)+u*s*qe(i-e))),y=F(d),v=d?function(x){var M=F(x*=d)/y,p=F(d-x)/y,w=p*c+M*h,S=p*a+M*g,P=p*f+M*l;return[an(S,w)*U,an(P,mn(w*w+S*S))*U]}:function(){return[e*U,r*U]};return v.distance=d,v}const dr=n=>n;var Gn=1/0,Zt=Gn,Jn=-Gn,Bt=Jn,pr={point:Bo,lineStart:K,lineEnd:K,polygonStart:K,polygonEnd:K,result:function(){var n=[[Gn,Zt],[Jn,Bt]];return Jn=Bt=-(Zt=Gn=1/0),n}};function Bo(n,t){n<Gn&&(Gn=n),n>Jn&&(Jn=n),t<Zt&&(Zt=t),t>Bt&&(Bt=t)}function Le(n){return function(t){var e=new Me;for(var r in n)e[r]=n[r];return e.stream=t,e}}function Me(){}Me.prototype={constructor:Me,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Re(n,t,e){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),Wt(e,n.stream(pr)),t(pr.result()),r!=null&&n.clipExtent(r),n}function pi(n,t,e){return Re(n,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+t[0][0]+(i-u*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(o-u*(r[1][1]+r[0][1]))/2;n.scale(150*u).translate([f,s])},e)}function Ho(n,t,e){return pi(n,[[0,0],t],e)}function Go(n,t,e){return Re(n,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),u=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];n.scale(150*o).translate([u,f])},e)}function qo(n,t,e){return Re(n,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),u=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([u,f])},e)}var yr=16,Do=z(30*C);function vr(n,t){return+t?Vo(n,t):Uo(n)}function Uo(n){return Le({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Vo(n,t){function e(r,i,o,u,f,s,l,c,a,h,g,d,y,v){var x=l-r,M=c-i,p=x*x+M*M;if(p>4*t&&y--){var w=u+h,S=f+g,P=s+d,I=mn(w*w+S*S+P*P),A=wn(P/=I),b=H(H(P)-1)<O||H(o-a)<O?(o+a)/2:an(S,w),$=n(b,A),m=$[0],N=$[1],k=m-r,R=N-i,_=M*k-x*R;(_*_/p>t||H((x*k+M*R)/p-.5)>.3||u*h+f*g+s*d<Do)&&(e(r,i,o,u,f,s,m,N,b,w/=I,S/=I,P,y,v),v.point(m,N),e(m,N,b,w,S,P,l,c,a,h,g,d,y,v))}}return function(r){var i,o,u,f,s,l,c,a,h,g,d,y,v={point:x,lineStart:M,lineEnd:w,polygonStart:function(){r.polygonStart(),v.lineStart=S},polygonEnd:function(){r.polygonEnd(),v.lineStart=M}};function x(A,b){A=n(A,b),r.point(A[0],A[1])}function M(){a=NaN,v.point=p,r.lineStart()}function p(A,b){var $=kn([A,b]),m=n(A,b);e(a,h,c,g,d,y,a=m[0],h=m[1],c=A,g=$[0],d=$[1],y=$[2],yr,r),r.point(a,h)}function w(){v.point=x,r.lineEnd()}function S(){M(),v.point=P,v.lineEnd=I}function P(A,b){p(i=A,b),o=a,u=h,f=g,s=d,l=y,v.point=p}function I(){e(a,h,c,g,d,y,o,u,i,f,s,l,yr,r),v.lineEnd=w,w()}return v}}var Xo=Le({point:function(n,t){this.stream.point(n*C,t*C)}});function Yo(n){return Le({point:function(t,e){var r=n(t,e);return this.stream.point(r[0],r[1])}})}function Ko(n,t,e,r,i){function o(u,f){return u*=r,f*=i,[t+n*u,e-n*f]}return o.invert=function(u,f){return[(u-t)/n*r,(e-f)/n*i]},o}function xr(n,t,e,r,i,o){if(!o)return Ko(n,t,e,r,i);var u=z(o),f=F(o),s=u*n,l=f*n,c=u/n,a=f/n,h=(f*e-u*t)/n,g=(f*t+u*e)/n;function d(y,v){return y*=r,v*=i,[s*y-l*v+t,e-l*y-s*v]}return d.invert=function(y,v){return[r*(c*y-a*v+h),i*(g-a*y-c*v)]},d}function Wo(n){return Qo(function(){return n})()}function Qo(n){var t,e=150,r=480,i=250,o=0,u=0,f=0,s=0,l=0,c,a=0,h=1,g=1,d=null,y=ur,v=null,x,M,p,w=dr,S=.5,P,I,A,b,$;function m(_){return A(_[0]*C,_[1]*C)}function N(_){return _=A.invert(_[0],_[1]),_&&[_[0]*U,_[1]*U]}m.stream=function(_){return b&&$===_?b:b=Xo(Yo(c)(y(P(w($=_)))))},m.preclip=function(_){return arguments.length?(y=_,d=void 0,R()):y},m.postclip=function(_){return arguments.length?(w=_,v=x=M=p=null,R()):w},m.clipAngle=function(_){return arguments.length?(y=+_?Ao(d=_*C):(d=null,ur),R()):d*U},m.clipExtent=function(_){return arguments.length?(w=_==null?(v=x=M=p=null,dr):Io(v=+_[0][0],x=+_[0][1],M=+_[1][0],p=+_[1][1]),R()):v==null?null:[[v,x],[M,p]]},m.scale=function(_){return arguments.length?(e=+_,k()):e},m.translate=function(_){return arguments.length?(r=+_[0],i=+_[1],k()):[r,i]},m.center=function(_){return arguments.length?(o=_[0]%360*C,u=_[1]%360*C,k()):[o*U,u*U]},m.rotate=function(_){return arguments.length?(f=_[0]%360*C,s=_[1]%360*C,l=_.length>2?_[2]%360*C:0,k()):[f*U,s*U,l*U]},m.angle=function(_){return arguments.length?(a=_%360*C,k()):a*U},m.reflectX=function(_){return arguments.length?(h=_?-1:1,k()):h<0},m.reflectY=function(_){return arguments.length?(g=_?-1:1,k()):g<0},m.precision=function(_){return arguments.length?(P=vr(I,S=_*_),R()):mn(S)},m.fitExtent=function(_,E){return pi(m,_,E)},m.fitSize=function(_,E){return Ho(m,_,E)},m.fitWidth=function(_,E){return Go(m,_,E)},m.fitHeight=function(_,E){return qo(m,_,E)};function k(){var _=xr(e,0,0,h,g,a).apply(null,t(o,u)),E=xr(e,r-_[0],i-_[1],h,g,a);return c=si(f,s,l),I=ve(t,E),A=ve(c,I),P=vr(I,S),R()}function R(){return b=$=null,m}return function(){return t=n.apply(this,arguments),m.invert=t.invert&&N,k()}}function Jo(n){return function(t,e){var r=mn(t*t+e*e),i=n(r),o=F(i),u=z(i);return[an(t*o,r*u),wn(r&&e*o/r)]}}function yi(n,t){var e=z(t),r=1+z(n)*e;return[e*F(n)/r,F(t)/r]}yi.invert=Jo(function(n){return 2*Wr(n)});function nu(){return Wo(yi).scale(250).clipAngle(142)}function Te(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function vi(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function ot(){}var nt=.7,Ht=1/nt,On="\\s*([+-]?\\d+)\\s*",tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tu=/^#([0-9a-f]{3,8})$/,eu=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),ru=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),iu=new RegExp(`^rgba\\(${On},${On},${On},${tt}\\)$`),ou=new RegExp(`^rgba\\(${dn},${dn},${dn},${tt}\\)$`),uu=new RegExp(`^hsl\\(${tt},${dn},${dn}\\)$`),fu=new RegExp(`^hsla\\(${tt},${dn},${dn},${tt}\\)$`),mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Te(ot,et,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:wr,formatHex:wr,formatHex8:lu,formatHsl:su,formatRgb:_r,toString:_r});function wr(){return this.rgb().formatHex()}function lu(){return this.rgb().formatHex8()}function su(){return xi(this).formatHsl()}function _r(){return this.rgb().formatRgb()}function et(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=tu.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?Mr(t):e===3?new en(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?dt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?dt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eu.exec(n))?new en(t[1],t[2],t[3],1):(t=ru.exec(n))?new en(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iu.exec(n))?dt(t[1],t[2],t[3],t[4]):(t=ou.exec(n))?dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uu.exec(n))?Er(t[1],t[2]/100,t[3]/100,1):(t=fu.exec(n))?Er(t[1],t[2]/100,t[3]/100,t[4]):mr.hasOwnProperty(n)?Mr(mr[n]):n==="transparent"?new en(NaN,NaN,NaN,0):null}function Mr(n){return new en(n>>16&255,n>>8&255,n&255,1)}function dt(n,t,e,r){return r<=0&&(n=t=e=NaN),new en(n,t,e,r)}function au(n){return n instanceof ot||(n=et(n)),n?(n=n.rgb(),new en(n.r,n.g,n.b,n.opacity)):new en}function be(n,t,e,r){return arguments.length===1?au(n):new en(n,t,e,r??1)}function en(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}Te(en,be,vi(ot,{brighter(n){return n=n==null?Ht:Math.pow(Ht,n),new en(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?nt:Math.pow(nt,n),new en(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new en(Nn(this.r),Nn(this.g),Nn(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:br,formatHex:br,formatHex8:cu,formatRgb:Sr,toString:Sr}));function br(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}`}function cu(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}${$n((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sr(){const n=Gt(this.opacity);return`${n===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${n===1?")":`, ${n})`}`}function Gt(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Nn(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function $n(n){return n=Nn(n),(n<16?"0":"")+n.toString(16)}function Er(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new cn(n,t,e,r)}function xi(n){if(n instanceof cn)return new cn(n.h,n.s,n.l,n.opacity);if(n instanceof ot||(n=et(n)),!n)return new cn;if(n instanceof cn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),u=NaN,f=o-i,s=(o+i)/2;return f?(t===o?u=(e-r)/f+(e<r)*6:e===o?u=(r-t)/f+2:u=(t-e)/f+4,f/=s<.5?o+i:2-o-i,u*=60):f=s>0&&s<1?0:u,new cn(u,f,s,n.opacity)}function hu(n,t,e,r){return arguments.length===1?xi(n):new cn(n,t,e,r??1)}function cn(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}Te(cn,hu,vi(ot,{brighter(n){return n=n==null?Ht:Math.pow(Ht,n),new cn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?nt:Math.pow(nt,n),new cn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new en(ne(n>=240?n-240:n+120,i,r),ne(n,i,r),ne(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new cn(Pr(this.h),pt(this.s),pt(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Gt(this.opacity);return`${n===1?"hsl(":"hsla("}${Pr(this.h)}, ${pt(this.s)*100}%, ${pt(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Pr(n){return n=(n||0)%360,n<0?n+360:n}function pt(n){return Math.max(0,Math.min(1,n||0))}function ne(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}function gu(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}const Fe=n=>()=>n;function du(n,t){return function(e){return n+e*t}}function pu(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function yu(n){return(n=+n)==1?mi:function(t,e){return e-t?pu(t,e,n):Fe(isNaN(t)?e:t)}}function mi(n,t){var e=t-n;return e?du(n,e):Fe(isNaN(n)?t:n)}const $r=function n(t){var e=yu(t);function r(i,o){var u=e((i=be(i)).r,(o=be(o)).r),f=e(i.g,o.g),s=e(i.b,o.b),l=mi(i.opacity,o.opacity);return function(c){return i.r=u(c),i.g=f(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=n,r}(1);function wi(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=n[i]*(1-o)+t[i]*o;return r}}function _i(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function tl(n,t){return(_i(t)?wi:Mi)(n,t)}function Mi(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),o=new Array(e),u;for(u=0;u<r;++u)i[u]=Ce(n[u],t[u]);for(;u<e;++u)o[u]=t[u];return function(f){for(u=0;u<r;++u)o[u]=i[u](f);return o}}function vu(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function qt(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function xu(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=Ce(n[i],t[i]):r[i]=t[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var Se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,te=new RegExp(Se.source,"g");function mu(n){return function(){return n}}function wu(n){return function(t){return n(t)+""}}function _u(n,t){var e=Se.lastIndex=te.lastIndex=0,r,i,o,u=-1,f=[],s=[];for(n=n+"",t=t+"";(r=Se.exec(n))&&(i=te.exec(t));)(o=i.index)>e&&(o=t.slice(e,o),f[u]?f[u]+=o:f[++u]=o),(r=r[0])===(i=i[0])?f[u]?f[u]+=i:f[++u]=i:(f[++u]=null,s.push({i:u,x:qt(r,i)})),e=te.lastIndex;return e<t.length&&(o=t.slice(e),f[u]?f[u]+=o:f[++u]=o),f.length<2?s[0]?wu(s[0].x):mu(t):(t=s.length,function(l){for(var c=0,a;c<t;++c)f[(a=s[c]).i]=a.x(l);return f.join("")})}function Ce(n,t){var e=typeof t,r;return t==null||e==="boolean"?Fe(t):(e==="number"?qt:e==="string"?(r=et(t))?(t=r,$r):_u:t instanceof et?$r:t instanceof Date?vu:_i(t)?wi:Array.isArray(t)?Mi:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xu:qt)(n,t)}function Mu(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function bu(n){return function(){return n}}function Su(n){return+n}var Ar=[0,1];function Cn(n){return n}function Ee(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:bu(isNaN(t)?NaN:.5)}function Eu(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function Pu(n,t,e){var r=n[0],i=n[1],o=t[0],u=t[1];return i<r?(r=Ee(i,r),o=e(u,o)):(r=Ee(r,i),o=e(o,u)),function(f){return o(r(f))}}function $u(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=Ee(n[u],n[u+1]),o[u]=e(t[u],t[u+1]);return function(f){var s=Ji(n,f,1,r)-1;return o[s](i[s](f))}}function Au(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Nu(){var n=Ar,t=Ar,e=Ce,r,i,o,u=Cn,f,s,l;function c(){var h=Math.min(n.length,t.length);return u!==Cn&&(u=Eu(n[0],n[h-1])),f=h>2?$u:Pu,s=l=null,a}function a(h){return h==null||isNaN(h=+h)?o:(s||(s=f(n.map(r),t,e)))(r(u(h)))}return a.invert=function(h){return u(i((l||(l=f(t,n.map(r),qt)))(h)))},a.domain=function(h){return arguments.length?(n=Array.from(h,Su),c()):n.slice()},a.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},a.rangeRound=function(h){return t=Array.from(h),e=Mu,c()},a.clamp=function(h){return arguments.length?(u=h?!0:Cn,c()):u!==Cn},a.interpolate=function(h){return arguments.length?(e=h,c()):e},a.unknown=function(h){return arguments.length?(o=h,a):o},function(h,g){return r=h,i=g,c()}}function Iu(){return Nu()(Cn,Cn)}function ku(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Dt(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function qn(n){return n=Dt(Math.abs(n)),n?n[1]:NaN}function Lu(n,t){return function(e,r){for(var i=e.length,o=[],u=0,f=n[0],s=0;i>0&&f>0&&(s+f+1>r&&(f=Math.max(1,r-s)),o.push(e.substring(i-=f,i+f)),!((s+=f+1)>r));)f=n[u=(u+1)%n.length];return o.reverse().join(t)}}function Ru(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var Tu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ut(n){if(!(t=Tu.exec(n)))throw new Error("invalid format: "+n);var t;return new je({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ut.prototype=je.prototype;function je(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}je.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fu(n){n:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break n;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var bi;function Cu(n,t){var e=Dt(n,t);if(!e)return n+"";var r=e[0],i=e[1],o=i-(bi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Dt(n,Math.max(0,t+o-1))[0]}function Nr(n,t){var e=Dt(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ir={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:ku,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Nr(n*100,t),r:Nr,s:Cu,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function kr(n){return n}var Lr=Array.prototype.map,Rr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ju(n){var t=n.grouping===void 0||n.thousands===void 0?kr:Lu(Lr.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?kr:Ru(Lr.call(n.numerals,String)),u=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",s=n.nan===void 0?"NaN":n.nan+"";function l(a){a=Ut(a);var h=a.fill,g=a.align,d=a.sign,y=a.symbol,v=a.zero,x=a.width,M=a.comma,p=a.precision,w=a.trim,S=a.type;S==="n"?(M=!0,S="g"):Ir[S]||(p===void 0&&(p=12),w=!0,S="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var P=y==="$"?e:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",I=y==="$"?r:/[%p]/.test(S)?u:"",A=Ir[S],b=/[defgprs%]/.test(S);p=p===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function $(m){var N=P,k=I,R,_,E;if(S==="c")k=A(m)+k,m="";else{m=+m;var L=m<0||1/m<0;if(m=isNaN(m)?s:A(Math.abs(m),p),w&&(m=Fu(m)),L&&+m==0&&d!=="+"&&(L=!1),N=(L?d==="("?d:f:d==="-"||d==="("?"":d)+N,k=(S==="s"?Rr[8+bi/3]:"")+k+(L&&d==="("?")":""),b){for(R=-1,_=m.length;++R<_;)if(E=m.charCodeAt(R),48>E||E>57){k=(E===46?i+m.slice(R+1):m.slice(R))+k,m=m.slice(0,R);break}}}M&&!v&&(m=t(m,1/0));var j=N.length+m.length+k.length,T=j<x?new Array(x-j+1).join(h):"";switch(M&&v&&(m=t(T+m,T.length?x-k.length:1/0),T=""),g){case"<":m=N+m+k+T;break;case"=":m=N+T+m+k;break;case"^":m=T.slice(0,j=T.length>>1)+N+m+k+T.slice(j);break;default:m=T+N+m+k;break}return o(m)}return $.toString=function(){return a+""},$}function c(a,h){var g=l((a=Ut(a),a.type="f",a)),d=Math.max(-8,Math.min(8,Math.floor(qn(h)/3)))*3,y=Math.pow(10,-d),v=Rr[8+d/3];return function(x){return g(y*x)+v}}return{format:l,formatPrefix:c}}var yt,Si,Ei;zu({thousands:",",grouping:[3],currency:["$",""]});function zu(n){return yt=ju(n),Si=yt.format,Ei=yt.formatPrefix,yt}function Ou(n){return Math.max(0,-qn(Math.abs(n)))}function Zu(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qn(t)/3)))*3-qn(Math.abs(n)))}function Bu(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,qn(t)-qn(n))+1}function Hu(n,t,e,r){var i=io(n,t,e),o;switch(r=Ut(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(o=Zu(i,u))&&(r.precision=o),Ei(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Bu(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Ou(i))&&(r.precision=o-(r.type==="%")*2);break}}return Si(r)}function Gu(n){var t=n.domain;return n.ticks=function(e){var r=t();return ro(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return Hu(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,o=r.length-1,u=r[i],f=r[o],s,l,c=10;for(f<u&&(l=u,u=f,f=l,l=i,i=o,o=l);c-- >0;){if(l=fe(u,f,e),l===s)return r[i]=u,r[o]=f,t(r);if(l>0)u=Math.floor(u/l)*l,f=Math.ceil(f/l)*l;else if(l<0)u=Math.ceil(u*l)/l,f=Math.floor(f*l)/l;else break;s=l}return n},n}function Pe(){var n=Iu();return n.copy=function(){return Au(n,Pe())},gu.apply(n,arguments),Gu(n)}const xn=11102230246251565e-32,Y=134217729,qu=(3+8*xn)*xn;function ee(n,t,e,r,i){let o,u,f,s,l=t[0],c=r[0],a=0,h=0;c>l==c>-l?(o=l,l=t[++a]):(o=c,c=r[++h]);let g=0;if(a<n&&h<e)for(c>l==c>-l?(u=l+o,f=o-(u-l),l=t[++a]):(u=c+o,f=o-(u-c),c=r[++h]),o=u,f!==0&&(i[g++]=f);a<n&&h<e;)c>l==c>-l?(u=o+l,s=u-o,f=o-(u-s)+(l-s),l=t[++a]):(u=o+c,s=u-o,f=o-(u-s)+(c-s),c=r[++h]),o=u,f!==0&&(i[g++]=f);for(;a<n;)u=o+l,s=u-o,f=o-(u-s)+(l-s),l=t[++a],o=u,f!==0&&(i[g++]=f);for(;h<e;)u=o+c,s=u-o,f=o-(u-s)+(c-s),c=r[++h],o=u,f!==0&&(i[g++]=f);return(o!==0||g===0)&&(i[g++]=o),g}function Du(n,t){let e=t[0];for(let r=1;r<n;r++)e+=t[r];return e}function ut(n){return new Float64Array(n)}const Uu=(3+16*xn)*xn,Vu=(2+12*xn)*xn,Xu=(9+64*xn)*xn*xn,Ln=ut(4),Tr=ut(8),Fr=ut(12),Cr=ut(16),W=ut(4);function Yu(n,t,e,r,i,o,u){let f,s,l,c,a,h,g,d,y,v,x,M,p,w,S,P,I,A;const b=n-i,$=e-i,m=t-o,N=r-o;w=b*N,h=Y*b,g=h-(h-b),d=b-g,h=Y*N,y=h-(h-N),v=N-y,S=d*v-(w-g*y-d*y-g*v),P=m*$,h=Y*m,g=h-(h-m),d=m-g,h=Y*$,y=h-(h-$),v=$-y,I=d*v-(P-g*y-d*y-g*v),x=S-I,a=S-x,Ln[0]=S-(x+a)+(a-I),M=w+x,a=M-w,p=w-(M-a)+(x-a),x=p-P,a=p-x,Ln[1]=p-(x+a)+(a-P),A=M+x,a=A-M,Ln[2]=M-(A-a)+(x-a),Ln[3]=A;let k=Du(4,Ln),R=Vu*u;if(k>=R||-k>=R||(a=n-b,f=n-(b+a)+(a-i),a=e-$,l=e-($+a)+(a-i),a=t-m,s=t-(m+a)+(a-o),a=r-N,c=r-(N+a)+(a-o),f===0&&s===0&&l===0&&c===0)||(R=Xu*u+qu*Math.abs(k),k+=b*c+N*f-(m*l+$*s),k>=R||-k>=R))return k;w=f*N,h=Y*f,g=h-(h-f),d=f-g,h=Y*N,y=h-(h-N),v=N-y,S=d*v-(w-g*y-d*y-g*v),P=s*$,h=Y*s,g=h-(h-s),d=s-g,h=Y*$,y=h-(h-$),v=$-y,I=d*v-(P-g*y-d*y-g*v),x=S-I,a=S-x,W[0]=S-(x+a)+(a-I),M=w+x,a=M-w,p=w-(M-a)+(x-a),x=p-P,a=p-x,W[1]=p-(x+a)+(a-P),A=M+x,a=A-M,W[2]=M-(A-a)+(x-a),W[3]=A;const _=ee(4,Ln,4,W,Tr);w=b*c,h=Y*b,g=h-(h-b),d=b-g,h=Y*c,y=h-(h-c),v=c-y,S=d*v-(w-g*y-d*y-g*v),P=m*l,h=Y*m,g=h-(h-m),d=m-g,h=Y*l,y=h-(h-l),v=l-y,I=d*v-(P-g*y-d*y-g*v),x=S-I,a=S-x,W[0]=S-(x+a)+(a-I),M=w+x,a=M-w,p=w-(M-a)+(x-a),x=p-P,a=p-x,W[1]=p-(x+a)+(a-P),A=M+x,a=A-M,W[2]=M-(A-a)+(x-a),W[3]=A;const E=ee(_,Tr,4,W,Fr);w=f*c,h=Y*f,g=h-(h-f),d=f-g,h=Y*c,y=h-(h-c),v=c-y,S=d*v-(w-g*y-d*y-g*v),P=s*l,h=Y*s,g=h-(h-s),d=s-g,h=Y*l,y=h-(h-l),v=l-y,I=d*v-(P-g*y-d*y-g*v),x=S-I,a=S-x,W[0]=S-(x+a)+(a-I),M=w+x,a=M-w,p=w-(M-a)+(x-a),x=p-P,a=p-x,W[1]=p-(x+a)+(a-P),A=M+x,a=A-M,W[2]=M-(A-a)+(x-a),W[3]=A;const L=ee(E,Fr,4,W,Cr);return Cr[L-1]}function vt(n,t,e,r,i,o){const u=(t-o)*(e-i),f=(n-i)*(r-o),s=u-f,l=Math.abs(u+f);return Math.abs(s)>=Uu*l?s:-Yu(n,t,e,r,i,o,l)}const jr=Math.pow(2,-52),xt=new Uint32Array(512);class rt{static from(t,e=nf,r=tf){const i=t.length,o=new Float64Array(i*2);for(let u=0;u<i;u++){const f=t[u];o[2*u]=e(f),o[2*u+1]=r(f)}return new rt(o)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*e-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:r,_hullTri:i,_hullHash:o}=this,u=t.length>>1;let f=1/0,s=1/0,l=-1/0,c=-1/0;for(let b=0;b<u;b++){const $=t[2*b],m=t[2*b+1];$<f&&(f=$),m<s&&(s=m),$>l&&(l=$),m>c&&(c=m),this._ids[b]=b}const a=(f+l)/2,h=(s+c)/2;let g,d,y;for(let b=0,$=1/0;b<u;b++){const m=re(a,h,t[2*b],t[2*b+1]);m<$&&(g=b,$=m)}const v=t[2*g],x=t[2*g+1];for(let b=0,$=1/0;b<u;b++){if(b===g)continue;const m=re(v,x,t[2*b],t[2*b+1]);m<$&&m>0&&(d=b,$=m)}let M=t[2*d],p=t[2*d+1],w=1/0;for(let b=0;b<u;b++){if(b===g||b===d)continue;const $=Qu(v,x,M,p,t[2*b],t[2*b+1]);$<w&&(y=b,w=$)}let S=t[2*y],P=t[2*y+1];if(w===1/0){for(let m=0;m<u;m++)this._dists[m]=t[2*m]-t[0]||t[2*m+1]-t[1];jn(this._ids,this._dists,0,u-1);const b=new Uint32Array(u);let $=0;for(let m=0,N=-1/0;m<u;m++){const k=this._ids[m],R=this._dists[k];R>N&&(b[$++]=k,N=R)}this.hull=b.subarray(0,$),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(vt(v,x,M,p,S,P)<0){const b=d,$=M,m=p;d=y,M=S,p=P,y=b,S=$,P=m}const I=Ju(v,x,M,p,S,P);this._cx=I.x,this._cy=I.y;for(let b=0;b<u;b++)this._dists[b]=re(t[2*b],t[2*b+1],I.x,I.y);jn(this._ids,this._dists,0,u-1),this._hullStart=g;let A=3;r[g]=e[y]=d,r[d]=e[g]=y,r[y]=e[d]=g,i[g]=0,i[d]=1,i[y]=2,o.fill(-1),o[this._hashKey(v,x)]=g,o[this._hashKey(M,p)]=d,o[this._hashKey(S,P)]=y,this.trianglesLen=0,this._addTriangle(g,d,y,-1,-1,-1);for(let b=0,$,m;b<this._ids.length;b++){const N=this._ids[b],k=t[2*N],R=t[2*N+1];if(b>0&&Math.abs(k-$)<=jr&&Math.abs(R-m)<=jr||($=k,m=R,N===g||N===d||N===y))continue;let _=0;for(let B=0,V=this._hashKey(k,R);B<this._hashSize&&(_=o[(V+B)%this._hashSize],!(_!==-1&&_!==r[_]));B++);_=e[_];let E=_,L;for(;L=r[E],vt(k,R,t[2*E],t[2*E+1],t[2*L],t[2*L+1])>=0;)if(E=L,E===_){E=-1;break}if(E===-1)continue;let j=this._addTriangle(E,N,r[E],-1,-1,i[E]);i[N]=this._legalize(j+2),i[E]=j,A++;let T=r[E];for(;L=r[T],vt(k,R,t[2*T],t[2*T+1],t[2*L],t[2*L+1])<0;)j=this._addTriangle(T,N,L,i[N],-1,i[T]),i[N]=this._legalize(j+2),r[T]=T,A--,T=L;if(E===_)for(;L=e[E],vt(k,R,t[2*L],t[2*L+1],t[2*E],t[2*E+1])<0;)j=this._addTriangle(L,N,E,-1,i[E],i[L]),this._legalize(j+2),i[L]=j,r[E]=E,A--,E=L;this._hullStart=e[N]=E,r[E]=e[T]=N,r[N]=T,o[this._hashKey(k,R)]=N,o[this._hashKey(t[2*E],t[2*E+1])]=E}this.hull=new Uint32Array(A);for(let b=0,$=this._hullStart;b<A;b++)this.hull[b]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(Ku(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:r,coords:i}=this;let o=0,u=0;for(;;){const f=r[t],s=t-t%3;if(u=s+(t+2)%3,f===-1){if(o===0)break;t=xt[--o];continue}const l=f-f%3,c=s+(t+1)%3,a=l+(f+2)%3,h=e[u],g=e[t],d=e[c],y=e[a];if(Wu(i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*d],i[2*d+1],i[2*y],i[2*y+1])){e[t]=y,e[f]=h;const x=r[a];if(x===-1){let p=this._hullStart;do{if(this._hullTri[p]===a){this._hullTri[p]=t;break}p=this._hullPrev[p]}while(p!==this._hullStart)}this._link(t,x),this._link(f,r[u]),this._link(u,a);const M=l+(f+1)%3;o<xt.length&&(xt[o++]=M)}else{if(o===0)break;t=xt[--o]}}return u}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,r,i,o,u){const f=this.trianglesLen;return this._triangles[f]=t,this._triangles[f+1]=e,this._triangles[f+2]=r,this._link(f,i),this._link(f+1,o),this._link(f+2,u),this.trianglesLen+=3,f}}function Ku(n,t){const e=n/(Math.abs(n)+Math.abs(t));return(t>0?3-e:1+e)/4}function re(n,t,e,r){const i=n-e,o=t-r;return i*i+o*o}function Wu(n,t,e,r,i,o,u,f){const s=n-u,l=t-f,c=e-u,a=r-f,h=i-u,g=o-f,d=s*s+l*l,y=c*c+a*a,v=h*h+g*g;return s*(a*v-y*g)-l*(c*v-y*h)+d*(c*g-a*h)<0}function Qu(n,t,e,r,i,o){const u=e-n,f=r-t,s=i-n,l=o-t,c=u*u+f*f,a=s*s+l*l,h=.5/(u*l-f*s),g=(l*c-f*a)*h,d=(u*a-s*c)*h;return g*g+d*d}function Ju(n,t,e,r,i,o){const u=e-n,f=r-t,s=i-n,l=o-t,c=u*u+f*f,a=s*s+l*l,h=.5/(u*l-f*s),g=n+(l*c-f*a)*h,d=t+(u*a-s*c)*h;return{x:g,y:d}}function jn(n,t,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const o=n[i],u=t[o];let f=i-1;for(;f>=e&&t[n[f]]>u;)n[f+1]=n[f--];n[f+1]=o}else{const i=e+r>>1;let o=e+1,u=r;Dn(n,i,o),t[n[e]]>t[n[r]]&&Dn(n,e,r),t[n[o]]>t[n[r]]&&Dn(n,o,r),t[n[e]]>t[n[o]]&&Dn(n,e,o);const f=n[o],s=t[f];for(;;){do o++;while(t[n[o]]<s);do u--;while(t[n[u]]>s);if(u<o)break;Dn(n,o,u)}n[e+1]=n[u],n[u]=f,r-o+1>=u-e?(jn(n,t,o,r),jn(n,t,e,u-1)):(jn(n,t,e,u-1),jn(n,t,o,r))}}function Dn(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}function nf(n){return n[0]}function tf(n){return n[1]}function ef(n,t){var e=0,r=0,i=0,o=0,u=0,f=0,s=0,l=0,c=null,a=null,h=n[0],g=n[1],d=t.length;for(e;e<d;e++){r=0;var y=t[e].length-1,v=t[e];if(c=v[0],c[0]!==v[y][0]&&c[1]!==v[y][1])throw new Error("First and last coordinates in a ring must be the same");for(u=c[0]-h,f=c[1]-g,r;r<y;r++){if(a=v[r+1],l=a[1]-g,f<0&&l<0||f>0&&l>0){c=a,f=l,u=c[0]-h;continue}if(s=a[0]-n[0],l>0&&f<=0){if(o=u*l-s*f,o>0)i=i+1;else if(o===0)return 0}else if(f>0&&l<=0){if(o=u*l-s*f,o<0)i=i+1;else if(o===0)return 0}else if(l===0&&f<0){if(o=u*l-s*f,o===0)return 0}else if(f===0&&l<0){if(o=u*l-s*f,o===0)return 0}else if(f===0&&l===0){if(s<=0&&u>=0)return 0;if(u<=0&&s>=0)return 0}c=a,f=l,u=s}}return i%2!==0}function rf(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function of(n){return n.type==="Feature"?n.geometry:n}function uf(n,t,e={}){if(!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=rf(n),i=of(t),o=i.type,u=t.bbox;let f=i.coordinates;if(u&&ff(r,u)===!1)return!1;o==="Polygon"&&(f=[f]);let s=!1;for(var l=0;l<f.length;++l){const c=ef(r,f[l]);if(c===0)return!e.ignoreBoundary;c&&(s=!0)}return s}function ff(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}var lf=uf;const zr=1e-6;class An{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,r){t=+t,e=+e,r=+r;const i=t+r,o=e;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>zr||Math.abs(this._y1-o)>zr)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${e}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,e,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class $e{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class sf{constructor(t,[e,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:r},vectors:i}=this;let o,u;const f=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let y=0,v=0,x=r.length,M,p;y<x;y+=3,v+=2){const w=r[y]*2,S=r[y+1]*2,P=r[y+2]*2,I=t[w],A=t[w+1],b=t[S],$=t[S+1],m=t[P],N=t[P+1],k=b-I,R=$-A,_=m-I,E=N-A,L=(k*E-R*_)*2;if(Math.abs(L)<1e-9){if(o===void 0){o=u=0;for(const T of e)o+=t[T*2],u+=t[T*2+1];o/=e.length,u/=e.length}const j=1e9*Math.sign((o-I)*E-(u-A)*_);M=(I+m)/2-j*E,p=(A+N)/2+j*_}else{const j=1/L,T=k*k+R*R,B=_*_+E*E;M=I+(E*T-R*B)*j,p=A+(k*B-_*T)*j}f[v]=M,f[v+1]=p}let s=e[e.length-1],l,c=s*4,a,h=t[2*s],g,d=t[2*s+1];i.fill(0);for(let y=0;y<e.length;++y)s=e[y],l=c,a=h,g=d,c=s*4,h=t[2*s],d=t[2*s+1],i[l+2]=i[c]=g-d,i[l+3]=i[c+1]=h-a}render(t){const e=t==null?t=new An:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:u,vectors:f}=this;if(o.length<=1)return null;for(let c=0,a=r.length;c<a;++c){const h=r[c];if(h<c)continue;const g=Math.floor(c/3)*2,d=Math.floor(h/3)*2,y=u[g],v=u[g+1],x=u[d],M=u[d+1];this._renderSegment(y,v,x,M,t)}let s,l=o[o.length-1];for(let c=0;c<o.length;++c){s=l,l=o[c];const a=Math.floor(i[l]/3)*2,h=u[a],g=u[a+1],d=s*4,y=this._project(h,g,f[d+2],f[d+3]);y&&this._renderSegment(h,g,y[0],y[1],t)}return e&&e.value()}renderBounds(t){const e=t==null?t=new An:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const r=e==null?e=new An:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let u=2;u<o;u+=2)(i[u]!==i[u-2]||i[u+1]!==i[u-1])&&e.lineTo(i[u],i[u+1]);return e.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,r=t.length/2;e<r;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i)}}cellPolygon(t){const e=new $e;return this.renderCell(t,e),e.value()}_renderSegment(t,e,r,i,o){let u;const f=this._regioncode(t,e),s=this._regioncode(r,i);f===0&&s===0?(o.moveTo(t,e),o.lineTo(r,i)):(u=this._clipSegment(t,e,r,i,f,s))&&(o.moveTo(u[0],u[1]),o.lineTo(u[2],u[3]))}contains(t,e,r){return e=+e,e!==e||(r=+r,r!==r)?!1:this.delaunay._step(t,e,r)===t}*neighbors(t){const e=this._clip(t);if(e)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){n:for(let o=0,u=e.length;o<u;o+=2)for(let f=0,s=i.length;f<s;f+=2)if(e[o]===i[f]&&e[o+1]===i[f+1]&&e[(o+2)%u]===i[(f+s-2)%s]&&e[(o+3)%u]===i[(f+s-1)%s]){yield r;break n}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,u=r[t];if(u===-1)return null;const f=[];let s=u;do{const l=Math.floor(s/3);if(f.push(e[l*2],e[l*2+1]),s=s%3===2?s-2:s+1,o[s]!==t)break;s=i[s]}while(s!==u&&s!==-1);return f}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,e,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,e))}_clipFinite(t,e){const r=e.length;let i=null,o,u,f=e[r-2],s=e[r-1],l,c=this._regioncode(f,s),a,h=0;for(let g=0;g<r;g+=2)if(o=f,u=s,f=e[g],s=e[g+1],l=c,c=this._regioncode(f,s),l===0&&c===0)a=h,h=0,i?i.push(f,s):i=[f,s];else{let d,y,v,x,M;if(l===0){if((d=this._clipSegment(o,u,f,s,l,c))===null)continue;[y,v,x,M]=d}else{if((d=this._clipSegment(f,s,o,u,c,l))===null)continue;[x,M,y,v]=d,a=h,h=this._edgecode(y,v),a&&h&&this._edge(t,a,h,i,i.length),i?i.push(y,v):i=[y,v]}a=h,h=this._edgecode(x,M),a&&h&&this._edge(t,a,h,i,i.length),i?i.push(x,M):i=[x,M]}if(i)a=h,h=this._edgecode(i[0],i[1]),a&&h&&this._edge(t,a,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,e,r,i,o,u){const f=o<u;for(f&&([t,e,r,i,o,u]=[r,i,t,e,u,o]);;){if(o===0&&u===0)return f?[r,i,t,e]:[t,e,r,i];if(o&u)return null;let s,l,c=o||u;c&8?(s=t+(r-t)*(this.ymax-e)/(i-e),l=this.ymax):c&4?(s=t+(r-t)*(this.ymin-e)/(i-e),l=this.ymin):c&2?(l=e+(i-e)*(this.xmax-t)/(r-t),s=this.xmax):(l=e+(i-e)*(this.xmin-t)/(r-t),s=this.xmin),o?(t=s,e=l,o=this._regioncode(t,e)):(r=s,i=l,u=this._regioncode(r,i))}}_clipInfinite(t,e,r,i,o,u){let f=Array.from(e),s;if((s=this._project(f[0],f[1],r,i))&&f.unshift(s[0],s[1]),(s=this._project(f[f.length-2],f[f.length-1],o,u))&&f.push(s[0],s[1]),f=this._clipFinite(t,f))for(let l=0,c=f.length,a,h=this._edgecode(f[c-2],f[c-1]);l<c;l+=2)a=h,h=this._edgecode(f[l],f[l+1]),a&&h&&(l=this._edge(t,a,h,f,l),c=f.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(t,e,r,i,o){for(;e!==r;){let u,f;switch(e){case 5:e=4;continue;case 4:e=6,u=this.xmax,f=this.ymin;break;case 6:e=2;continue;case 2:e=10,u=this.xmax,f=this.ymax;break;case 10:e=8;continue;case 8:e=9,u=this.xmin,f=this.ymax;break;case 9:e=1;continue;case 1:e=5,u=this.xmin,f=this.ymin;break}(i[o]!==u||i[o+1]!==f)&&this.contains(t,u,f)&&(i.splice(o,0,u,f),o+=2)}return o}_project(t,e,r,i){let o=1/0,u,f,s;if(i<0){if(e<=this.ymin)return null;(u=(this.ymin-e)/i)<o&&(s=this.ymin,f=t+(o=u)*r)}else if(i>0){if(e>=this.ymax)return null;(u=(this.ymax-e)/i)<o&&(s=this.ymax,f=t+(o=u)*r)}if(r>0){if(t>=this.xmax)return null;(u=(this.xmax-t)/r)<o&&(f=this.xmax,s=e+(o=u)*i)}else if(r<0){if(t<=this.xmin)return null;(u=(this.xmin-t)/r)<o&&(f=this.xmin,s=e+(o=u)*i)}return[f,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const r=(e+2)%t.length,i=(e+4)%t.length;(t[e]===t[r]&&t[r]===t[i]||t[e+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),e-=2)}t.length||(t=null)}return t}}const af=2*Math.PI,Rn=Math.pow;function cf(n){return n[0]}function hf(n){return n[1]}function gf(n){const{triangles:t,coords:e}=n;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],u=2*t[r+2];if((e[u]-e[i])*(e[o+1]-e[i+1])-(e[o]-e[i])*(e[u+1]-e[i+1])>1e-10)return!1}return!0}function df(n,t,e){return[n+Math.sin(n+t)*e,t+Math.cos(n-t)*e]}class ze{static from(t,e=cf,r=hf,i){return new ze("length"in t?pf(t,e,r,i):Float64Array.from(yf(t,e,r,i)))}constructor(t){this._delaunator=new rt(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&gf(t)){this.collinear=Int32Array.from({length:e.length/2},(h,g)=>g).sort((h,g)=>e[2*h]-e[2*g]||e[2*h+1]-e[2*g+1]);const s=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[e[2*s],e[2*s+1],e[2*l],e[2*l+1]],a=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,g=e.length/2;h<g;++h){const d=df(e[2*h],e[2*h+1],a);e[2*h]=d[0],e[2*h+1]=d[1]}this._delaunator=new rt(e)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,u=this.inedges.fill(-1),f=this._hullIndex.fill(-1);for(let s=0,l=r.length;s<l;++s){const c=o[s%3===2?s-2:s+1];(r[s]===-1||u[c]===-1)&&(u[c]=s)}for(let s=0,l=i.length;s<l;++s)f[i[s]]=s;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],u[i[0]]=1,i.length===2&&(u[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new sf(this,t)}*neighbors(t){const{inedges:e,hull:r,_hullIndex:i,halfedges:o,triangles:u,collinear:f}=this;if(f){const a=f.indexOf(t);a>0&&(yield f[a-1]),a<f.length-1&&(yield f[a+1]);return}const s=e[t];if(s===-1)return;let l=s,c=-1;do{if(yield c=u[l],l=l%3===2?l-2:l+1,u[l]!==t)return;if(l=o[l],l===-1){const a=r[(i[t]+1)%r.length];a!==c&&(yield a);return}}while(l!==s)}find(t,e,r=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const i=r;let o;for(;(o=this._step(r,t,e))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,e,r){const{inedges:i,hull:o,_hullIndex:u,halfedges:f,triangles:s,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,a=Rn(e-l[t*2],2)+Rn(r-l[t*2+1],2);const h=i[t];let g=h;do{let d=s[g];const y=Rn(e-l[d*2],2)+Rn(r-l[d*2+1],2);if(y<a&&(a=y,c=d),g=g%3===2?g-2:g+1,s[g]!==t)break;if(g=f[g],g===-1){if(g=o[(u[t]+1)%o.length],g!==d&&Rn(e-l[g*2],2)+Rn(r-l[g*2+1],2)<a)return g;break}}while(g!==h);return c}render(t){const e=t==null?t=new An:void 0,{points:r,halfedges:i,triangles:o}=this;for(let u=0,f=i.length;u<f;++u){const s=i[u];if(s<u)continue;const l=o[u]*2,c=o[s]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const r=t==null?t=new An:void 0,{points:i}=this;for(let o=0,u=i.length;o<u;o+=2){const f=i[o],s=i[o+1];t.moveTo(f+e,s),t.arc(f,s,e,0,af)}return r&&r.value()}renderHull(t){const e=t==null?t=new An:void 0,{hull:r,points:i}=this,o=r[0]*2,u=r.length;t.moveTo(i[o],i[o+1]);for(let f=1;f<u;++f){const s=2*r[f];t.lineTo(i[s],i[s+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new $e;return this.renderHull(t),t.value()}renderTriangle(t,e){const r=e==null?e=new An:void 0,{points:i,triangles:o}=this,u=o[t*=3]*2,f=o[t+1]*2,s=o[t+2]*2;return e.moveTo(i[u],i[u+1]),e.lineTo(i[f],i[f+1]),e.lineTo(i[s],i[s+1]),e.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,r=t.length/3;e<r;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new $e;return this.renderTriangle(t,e),e.value()}}function pf(n,t,e,r){const i=n.length,o=new Float64Array(i*2);for(let u=0;u<i;++u){const f=n[u];o[u*2]=t.call(r,f,u,n),o[u*2+1]=e.call(r,f,u,n)}return o}function*yf(n,t,e,r){let i=0;for(const o of n)yield t.call(r,o,i,n),yield e.call(r,o,i,n),++i}const Oe=Math.PI,Or=Oe/2,Zr=180/Oe,Br=Oe/180,vf=Math.atan2,Hr=Math.cos,xf=Math.max,mf=Math.min,Gr=Math.sin,wf=Math.sign||function(n){return n>0?1:n<0?-1:0},Pi=Math.sqrt;function _f(n){return n>1?Or:n<-1?-Or:Math.asin(n)}function $i(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function un(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Vt(n,t){return[n[0]+t[0],n[1]+t[1],n[2]+t[2]]}function Xt(n){var t=Pi(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);return[n[0]/t,n[1]/t,n[2]/t]}function Ze(n){return[vf(n[1],n[0])*Zr,_f(xf(-1,mf(1,n[2])))*Zr]}function pn(n){const t=n[0]*Br,e=n[1]*Br,r=Hr(e);return[r*Hr(t),r*Gr(t),Gr(e)]}function Be(n){return n=n.map(t=>pn(t)),$i(n[0],un(n[2],n[1]))}function Mf(n){const t=Sf(n),e=Pf(t),r=Ef(e,n),i=Af(e,n.length),o=bf(i,n),u=$f(e,n),{polygons:f,centers:s}=Nf(u,e,n),l=If(f),c=Lf(e,n),a=kf(r,e);return{delaunay:t,edges:r,triangles:e,centers:s,neighbors:i,polygons:f,mesh:l,hull:c,urquhart:a,find:o}}function bf(n,t){function e(r,i){let o=r[0]-i[0],u=r[1]-i[1],f=r[2]-i[2];return o*o+u*u+f*f}return function(i,o,u){u===void 0&&(u=0);let f,s,l=u;const c=pn([i,o]);do f=u,u=null,s=e(c,pn(t[f])),n[f].forEach(a=>{let h=e(c,pn(t[a]));if(h<s){s=h,u=a,l=a;return}});while(u!==null);return l}}function Sf(n){if(n.length<2)return{};let t=0;for(;isNaN(n[t][0]+n[t][1])&&t++<n.length;);const e=_o(n[t]),r=nu().translate([0,0]).scale(1).rotate(e.invert([180,0]));n=n.map(r);const i=[];let o=1;for(let a=0,h=n.length;a<h;a++){let g=n[a][0]**2+n[a][1]**2;!isFinite(g)||g>1e32?i.push(a):g>o&&(o=g)}const u=1e6*Pi(o);i.forEach(a=>n[a]=[u,0]),n.push([0,u]),n.push([-u,0]),n.push([0,-u]);const f=ze.from(n);f.projection=r;const{triangles:s,halfedges:l,inedges:c}=f;for(let a=0,h=l.length;a<h;a++)if(l[a]<0){const g=a%3==2?a-2:a+1,d=a%3==0?a+2:a-1,y=l[g],v=l[d];l[y]=v,l[v]=y,l[g]=l[d]=-1,s[a]=s[g]=s[d]=t,c[s[y]]=y%3==0?y+2:y-1,c[s[v]]=v%3==0?v+2:v-1,a+=2-a%3}else s[a]>n.length-3-1&&(s[a]=t);return f}function Ef(n,t){const e=new Set;return t.length===2?[[0,1]]:(n.forEach(r=>{if(r[0]!==r[1]&&!(Be(r.map(i=>t[i]))<0))for(let i=0,o;i<3;i++)o=(i+1)%3,e.add(St([r[i],r[o]]).join("-"))}),Array.from(e,r=>r.split("-").map(Number)))}function Pf(n){const{triangles:t}=n;if(!t)return[];const e=[];for(let r=0,i=t.length/3;r<i;r++){const o=t[3*r],u=t[3*r+1],f=t[3*r+2];o!==u&&u!==f&&e.push([o,f,u])}return e}function $f(n,t){return n.map(e=>{const r=e.map(o=>t[o]).map(pn),i=Vt(Vt(un(r[1],r[0]),un(r[2],r[1])),un(r[0],r[2]));return Ze(Xt(i))})}function Af(n,t){const e=[];return n.forEach(r=>{for(let i=0;i<3;i++){const o=r[i],u=r[(i+1)%3];e[o]=e[o]||[],e[o].push(u)}}),n.length===0&&(t===2?(e[0]=[1],e[1]=[0]):t===1&&(e[0]=[])),e}function Nf(n,t,e){const r=[],i=n.slice();if(t.length===0){if(e.length<2)return{polygons:r,centers:i};if(e.length===2){const f=pn(e[0]),s=pn(e[1]),l=Xt(Vt(f,s)),c=Xt(un(f,s)),a=un(l,c),h=[l,un(l,a),un(un(l,a),a),un(un(un(l,a),a),a)].map(Ze).map(u);return r.push(h),r.push(h.slice().reverse()),{polygons:r,centers:i}}}t.forEach((f,s)=>{for(let l=0;l<3;l++){const c=f[l],a=f[(l+1)%3],h=f[(l+2)%3];r[c]=r[c]||[],r[c].push([a,h,s,[c,a,h]])}});const o=r.map(f=>{const s=[f[0][2]];let l=f[0][1];for(let c=1;c<f.length;c++)for(let a=0;a<f.length;a++)if(f[a][0]==l){l=f[a][1],s.push(f[a][2]);break}if(s.length>2)return s;if(s.length==2){const c=qr(e[f[0][3][0]],e[f[0][3][1]],i[s[0]]),a=qr(e[f[0][3][2]],e[f[0][3][0]],i[s[0]]),h=u(c),g=u(a);return[s[0],g,s[1],h]}});function u(f){let s=-1;return i.slice(t.length,1/0).forEach((l,c)=>{l[0]===f[0]&&l[1]===f[1]&&(s=c+t.length)}),s<0&&(s=i.length,i.push(f)),s}return{polygons:o,centers:i}}function qr(n,t,e){n=pn(n),t=pn(t),e=pn(e);const r=wf($i(un(t,n),e));return Ze(Xt(Vt(n,t)).map(i=>r*i))}function If(n){const t=[];return n.forEach(e=>{if(!e)return;let r=e[e.length-1];for(let i of e)i>r&&t.push([r,i]),r=i}),t}function kf(n,t){return function(e){const r=new Map,i=new Map;return n.forEach((o,u)=>{const f=o.join("-");r.set(f,e[u]),i.set(f,!0)}),t.forEach(o=>{let u=0,f=-1;for(let s=0;s<3;s++){let l=St([o[s],o[(s+1)%3]]).join("-");r.get(l)>u&&(u=r.get(l),f=l)}i.set(f,!1)}),n.map(o=>i.get(o.join("-")))}}function Lf(n,t){const e=new Set,r=[];n.map(f=>{if(!(Be(f.map(s=>t[s>t.length?0:s]))>1e-12))for(let s=0;s<3;s++){let l=[f[s],f[(s+1)%3]],c=`${l[0]}-${l[1]}`;e.has(c)?e.delete(c):e.add(`${l[1]}-${l[0]}`)}});const i=new Map;let o;if(e.forEach(f=>{f=f.split("-").map(Number),i.set(f[0],f[1]),o=f[0]}),o===void 0)return r;let u=o;do{r.push(u);let f=i.get(u);i.set(u,-1),u=f}while(u>-1&&u!==o);return r}function Rf(n){const t=function(e){if(t.delaunay=null,t._data=e,typeof t._data=="object"&&t._data.type==="FeatureCollection"&&(t._data=t._data.features),typeof t._data=="object"){const r=t._data.map(i=>[t._vx(i),t._vy(i),i]).filter(i=>isFinite(i[0]+i[1]));t.points=r.map(i=>[i[0],i[1]]),t.valid=r.map(i=>i[2]),t.delaunay=Mf(t.points)}return t};return t._vx=function(e){if(typeof e=="object"&&"type"in e)return nr(e)[0];if(0 in e)return e[0]},t._vy=function(e){if(typeof e=="object"&&"type"in e)return nr(e)[1];if(1 in e)return e[1]},t.x=function(e){return e?(t._vx=e,t):t._vx},t.y=function(e){return e?(t._vy=e,t):t._vy},t.polygons=function(e){if(e!==void 0&&t(e),!t.delaunay)return!1;const r={type:"FeatureCollection",features:[]};return t.valid.length===0||(t.delaunay.polygons.forEach((i,o)=>r.features.push({type:"Feature",geometry:i?{type:"Polygon",coordinates:[[...i,i[0]].map(u=>t.delaunay.centers[u])]}:null,properties:{site:t.valid[o],sitecoordinates:t.points[o],neighbours:t.delaunay.neighbors[o]}})),t.valid.length===1&&r.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:t.valid[0],sitecoordinates:t.points[0],neighbours:[]}})),r},t.triangles=function(e){return e!==void 0&&t(e),t.delaunay?{type:"FeatureCollection",features:t.delaunay.triangles.map((r,i)=>(r=r.map(o=>t.points[o]),r.center=t.delaunay.centers[i],r)).filter(r=>Be(r)>0).map(r=>({type:"Feature",properties:{circumcenter:r.center},geometry:{type:"Polygon",coordinates:[[...r,r[0]]]}}))}:!1},t.links=function(e){if(e!==void 0&&t(e),!t.delaunay)return!1;const r=t.delaunay.edges.map(o=>Hn(t.points[o[0]],t.points[o[1]])),i=t.delaunay.urquhart(r);return{type:"FeatureCollection",features:t.delaunay.edges.map((o,u)=>({type:"Feature",properties:{source:t.valid[o[0]],target:t.valid[o[1]],length:r[u],urquhart:!!i[u]},geometry:{type:"LineString",coordinates:[t.points[o[0]],t.points[o[1]]]}}))}},t.mesh=function(e){return e!==void 0&&t(e),t.delaunay?{type:"MultiLineString",coordinates:t.delaunay.edges.map(r=>[t.points[r[0]],t.points[r[1]]])}:!1},t.cellMesh=function(e){if(e!==void 0&&t(e),!t.delaunay)return!1;const{centers:r,polygons:i}=t.delaunay,o=[];for(const u of i)if(u)for(let f=u.length,s=u[f-1],l=u[0],c=0;c<f;s=l,l=u[++c])l>s&&o.push([r[s],r[l]]);return{type:"MultiLineString",coordinates:o}},t._found=void 0,t.find=function(e,r,i){if(t._found=t.delaunay.find(e,r,t._found),!i||Hn([e,r],t.points[t._found])<i)return t._found},t.hull=function(e){e!==void 0&&t(e);const r=t.delaunay.hull,i=t.points;return r.length===0?null:{type:"Polygon",coordinates:[[...r.map(o=>i[o]),i[r[0]]]]}},n?t(n):t}function Ae(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function Tf(n){if(Array.isArray(n))return n}function Ff(n){if(Array.isArray(n))return Ae(n)}function Cf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jf(n,t,e){return t=Yt(t),Df(n,Ai()?Reflect.construct(t,[],Yt(n).constructor):t.apply(n,e))}function zf(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Of(n,t,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Yt(n){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(n)}function Zf(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ne(n,t)}function Ai(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ai=function(){return!!n})()}function Bf(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Hf(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var r,i,o,u,f=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,t!==0)for(;!(s=(r=o.call(e)).done)&&(f.push(r.value),f.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw i}}return f}}function Gf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Df(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cf(n)}function Ne(n,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Ne(n,t)}function gn(n,t){return Tf(n)||Hf(n,t)||Ni(n,t)||Gf()}function ie(n){return Ff(n)||Bf(n)||Ni(n)||qf()}function Ni(n,t){if(n){if(typeof n=="string")return Ae(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ae(n,t):void 0}}function Uf(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.resolution,r=e===void 0?1/0:e,i=Vf(n,r),o=Qn(i),u=Xf(n,r),f=[].concat(ie(o),ie(u)),s={type:"Polygon",coordinates:n},l=oi(s),c=gn(l,2),a=gn(c[0],2),h=a[0],g=a[1],d=gn(c[1],2),y=d[0],v=d[1],x=h>y||v>=89||g<=-89,M=[];if(x){var p=Rf(f).triangles(),w=new Map(f.map(function(L,j){var T=gn(L,2),B=T[0],V=T[1];return["".concat(B,"-").concat(V),j]}));p.features.forEach(function(L){var j,T=L.geometry.coordinates[0].slice(0,3).reverse(),B=[];if(T.forEach(function(rn){var X=gn(rn,2),bn=X[0],Sn=X[1],He="".concat(bn,"-").concat(Sn);w.has(He)&&B.push(w.get(He))}),B.length===3){if(B.some(function(rn){return rn<o.length})){var V=L.properties.circumcenter;if(!Ie(V,s,x))return}(j=M).push.apply(j,B)}})}else if(u.length)for(var b=rt.from(f),$=function(j){var T,B=[2,1,0].map(function(X){return b.triangles[j+X]}),V=B.map(function(X){return f[X]});if(B.some(function(X){return X<o.length})){var rn=[0,1].map(function(X){return oo(V,function(bn){return bn[X]})});if(!Ie(rn,s,x))return 1}(T=M).push.apply(T,ie(B))},m=0,N=b.triangles.length;m<N;m+=3)$(m);else{var S=Yr(i),P=S.vertices,I=S.holes,A=I===void 0?[]:I;M=Li(P,A,2)}var k=Pe(St(f,function(L){return L[0]}),[0,1]),R=Pe(St(f,function(L){return L[1]}),[0,1]),_=f.map(function(L){var j=gn(L,2),T=j[0],B=j[1];return[k(T),R(B)]}),E={points:f,indices:M,uvs:_};return{contour:i,triangles:E}}function Vf(n,t){return n.map(function(e){var r=[],i;return e.forEach(function(o){if(i){var u=Hn(o,i)*180/Math.PI;if(u>t)for(var f=Zo(i,o),s=1/Math.ceil(u/t),l=s;l<1;)r.push(f(l)),l+=s}r.push(i=o)}),r})}function Xf(n,t){var e={type:"Polygon",coordinates:n},r=oi(e),i=gn(r,2),o=gn(i[0],2),u=o[0],f=o[1],s=gn(i[1],2),l=s[0],c=s[1];if(Math.min(Math.abs(l-u),Math.abs(c-f))<t)return[];var a=u>l||c>=89||f<=-89;return Yf(t,{minLng:u,maxLng:l,minLat:f,maxLat:c}).filter(function(h){return Ie(h,e,a)})}function Yf(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.minLng,r=t.maxLng,i=t.minLat,o=t.maxLat,u=Math.round(Math.pow(360/n,2)/Math.PI),f=(1+Math.sqrt(5))/2,s=function(x){return x/f*360%360-180},l=function(x){return Math.acos(2*x/u-1)/Math.PI*180-90},c=function(x){return u*(Math.cos((x+90)*Math.PI/180)+1)/2},a=[o!==void 0?Math.ceil(c(o)):0,i!==void 0?Math.floor(c(i)):u-1],h=e===void 0&&r===void 0?function(){return!0}:e===void 0?function(v){return v<=r}:r===void 0?function(v){return v>=e}:r>=e?function(v){return v>=e&&v<=r}:function(v){return v>=e||v<=r},g=[],d=a[0];d<=a[1];d++){var y=s(d);h(y)&&g.push([y,l(d)])}return g}function Ie(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e?zo(t,n):lf(n,t)}var bt=window.THREE?window.THREE:{BufferGeometry:Ii,Float32BufferAttribute:ki},Dr=new bt.BufferGeometry().setAttribute?"setAttribute":"addAttribute",el=function(n){function t(e,r,i,o,u,f,s){var l;zf(this,t),l=jf(this,t),l.type="ConicPolygonBufferGeometry",l.parameters={polygonGeoJson:e,startHeight:r,endHeight:i,closedBottom:o,closedTop:u,includeSides:f,curvatureResolution:s},r=r||0,i=i||1,o=o!==void 0?o:!0,u=u!==void 0?u:!0,f=f!==void 0?f:!0,s=s||5;var c=Uf(e,{resolution:s}),a=c.contour,h=c.triangles,g=Qn(h.uvs),d=[],y=[],v=[],x=0,M=function(I){var A=Math.round(d.length/3),b=v.length;d=d.concat(I.vertices),y=y.concat(I.uvs),v=v.concat(A?I.indices.map(function($){return $+A}):I.indices),l.addGroup(b,v.length-b,x++)};f&&M(w()),o&&M(S(r,!1)),u&&M(S(i,!0)),l.setIndex(v),l[Dr]("position",new bt.Float32BufferAttribute(d,3)),l[Dr]("uv",new bt.Float32BufferAttribute(y,2)),l.computeVertexNormals();function p(P,I){var A=P.map(function(b){return b.map(function($){var m=gn($,2),N=m[0],k=m[1];return Kf(k,N,I)})});return Yr(A)}function w(){for(var P=p(a,r),I=P.vertices,A=P.holes,b=p(a,i),$=b.vertices,m=Qn([$,I]),N=Math.round($.length/3),k=new Set(A),R=0,_=[],E=0;E<N;E++){var L=E+1;if(L===N)L=R;else if(k.has(L)){var j=L;L=R,R=j}_.push(E,E+N,L+N),_.push(L+N,L,E)}for(var T=[],B=1;B>=0;B--)for(var V=0;V<N;V+=1)T.push(V/(N-1),B);return{indices:_,vertices:m,uvs:T}}function S(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:I?h.indices:h.indices.slice().reverse(),vertices:p([h.points],P).vertices,uvs:g}}return l}return Zf(t,n),Of(t)}(bt.BufferGeometry);function Kf(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=(90-n)*Math.PI/180,i=(90-t)*Math.PI/180;return[e*Math.sin(r)*Math.cos(i),e*Math.cos(r),e*Math.sin(r)*Math.sin(i)]}export{el as C,Zo as a,nl as b,et as c,Yr as f,Hn as g,tl as i,Pe as l,Qf as m,Jf as s};
